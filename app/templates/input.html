<!DOCTYPE html>
<html>
   <head>
     <meta name="google-site-verification" content="fttcwGg9F1gbh8l5e_24FFe9nGrpDViWjDw3Vljeoec" />
      <title>Mist - Event Input</title>
      <link rel="shortcut icon" type="image/x-icon" href="https://mist-asset.s3.us-east-2.amazonaws.com/temp+logo.ico" />
      <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
      <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/style.css') }}" />
      <link rel="stylesheet" href=
        "https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
      <meta name="viewport" content="width=device-width, initial-scale=1">
       <!-- <script src="{{ url_for('static', filename='index.js') }}"></script> -->
   </head>
   <body>
    <div class ="container-fluid" style ="background-color:rgb(255, 143, 0);">
      <div class="row" style="background-color:rgb(255, 143, 0);">
          <div class = "col-3" display: inline-block; style = "display:inline-block;padding:0;margin:0;">
              <a href = "https://mist-princeton.herokuapp.com/"><img src="https://mist-asset.s3.us-east-2.amazonaws.com/mist+map2.png"  class="responsive" style = "max-width:30%;height:auto;float:left;"></a>
          </div>
          <div class = "col-6 align-middle" display: inline-block;><center><h1 class="align-middle" style="font-size:4vw;float:center;display:inline;">Welcome to Mist!</h1></center></div>
          <div class = "col-3"display: inline-block; style = "display:inline-block;padding:0;">
              <a href = "https://mist-princeton.herokuapp.com/calendar"><img src="https://mist-asset.s3.us-east-2.amazonaws.com/mist+day.png"  class="responsive" style = "max-width:30%;height:auto;float:right;"></a>
          </div>
      </div>
  </div>
      <center><h1>Event Creation</h1></center>
      <form  action = "index" method = "get">
      <input type="submit", id = "back" value = "Return to Map">
      </form>
      <p id = "error" style="color:red;">
      </p>
      <form onsubmit = "return checkInput()"action = "addinput" method = "get">
      <table>
      <tr>
      <td align = "right"> <label for="Location"> Location: </label> </td>
      <td> <input type="text" id = "loc" name = "loc" ></td>
      </tr>
      <tr>
      <td align = "right"><label for="Title"> Event Title:</label></td>
      <td><Input type="text", id = "title" name = "title" ></td>
      </tr>
      <tr>
      <td align = "right"><label for="startTime"> Start Time:</label></td>
      <td><Input type = "time", id = "start" name = "start"></td>
      </tr>
      <tr>
      <td align = "right"><label for="endTime"> End Time:</label></td>
      <td><Input type = "time", id = "end" name = "end"></td>
      </tr>
      <tr>
      <td align = "right"><label for="Details"> Date:</label></td>
      <td><Input type = "date", id = "date" name = "date"></td>
      </tr>
      <tr>
      <td align = "right"><label for="Details"> Details:</label></td>
      <td><Input type = "text", id = "details" name = "details"></td>
      </tr>
      <tr>
        <td align = "right"><label for="roomnum">Room Number:</label></td>
        <td><Input type = "text" id = "roomnum" name = "roomnum"></td>
        </tr>
      <tr>
      <td align = "right"><label for="Coords">Coordinates:</label></td>
      <td><Input type = "text" id = "coords" name = "coords" value = '{  "lat":LATITUDE,  "lng":LONGITUDE }' readonly></td>
      </tr>

      <tr>
      <td></td>
      <td><input type="button", onclick = "initMap()" value = "Add coordinates from map"></td>
      </tr>
      <tr>
      <td></td>
      <td><input type="submit", id = "submit" value = "Create"></td>
      </tr>
      </table>
      </form>


      <div id = "map"></div>

      <script  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3KgDnvZgxSc4QSXw2ag40SLeG5wAXVoI">
      </script>

      <script type = "text/javascript">
      "use strict"

      function checkInput(){
        if(document.getElementById("loc").value ==""){
          document.getElementById("error").innerHTML = "no location";
          return false;
        }

        if(document.getElementById("title").value ==""){
          document.getElementById("error").innerHTML = "no title";
          return false;
        }
        if(document.getElementById("start").value ==""){
          document.getElementById("error").innerHTML = "no start time";
          return false;
        }
        if(document.getElementById("end").value ==""){
          document.getElementById("error").innerHTML = "no end time";
          return false;
        }
        if(document.getElementById("date").value ==""){
          document.getElementById("error").innerHTML = "no date";
          return false;
        }
        if(document.getElementById("coords").value =='{  "lat":LATITUDE,  "lng":LONGITUDE }'){
          document.getElementById("error").innerHTML = "pick coordinated from map";
          return false;
        }
        if(new Date(document.getElementById("start")) > new Date(document.getElementById("end"))){
          document.getElementById("error").innerHTML = "start time after end";
          return false;
        }
        
        return true;
      }


      function initMap() {
        console.log("initmap");
  const map = new google.maps.Map(document.getElementById("map"), {
    center: { lat:40.34657, lng: -74.65631 },
    zoom: 16,
  });

  let infoWindow = new google.maps.InfoWindow({
  content: "Click the map to choose a location",
  position: { lat:40.34657, lng: -74.65631 },
  map: map
});



  map.addListener("click", (mapsMouseEvent) => {
    // Close the current InfoWindow.
    infoWindow.close();
    // Create a new InfoWindow.
    infoWindow = new google.maps.InfoWindow({
      position: mapsMouseEvent.latLng,
    });
    infoWindow.setContent(
      JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2)
    );
    document.getElementById("coords").value = JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2)
    infoWindow.open(map);
  });
}



  </script>

  <!-- <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3KgDnvZgxSc4QSXw2ag40SLeG5wAXVoI&callback=initMap">

  </script> -->

      <hr>
      Created by Benjamin Nadon, Anthony Gartner, Hassan Aboiye, and Nicholas Cabrera.
      <hr>

   </body>
</html>
